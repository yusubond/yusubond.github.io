<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Milestone - Tips</title><link href="www.subond.com/" rel="alternate"></link><link href="www.subond.com/feeds/tips.atom.xml" rel="self"></link><id>www.subond.com/</id><updated>2016-07-12T00:00:00+08:00</updated><entry><title>Ubuntu系统中彻底删除Mysql，并重新安装</title><link href="www.subond.com/pages/2016/07/12/tip-tools.html" rel="alternate"></link><published>2016-07-12T00:00:00+08:00</published><updated>2016-07-12T00:00:00+08:00</updated><author><name>subond</name></author><id>tag:None,2016-07-12:www.subond.com/pages/2016/07/12/tip-tools.html</id><summary type="html">&lt;h3&gt;Ubuntu彻底删除Mysql,重装Mysql&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# 删除MySQL&lt;/span&gt;
sudo apt-get autoremove --purge mysql-server-5.0
sudo apt-get remove mysql-server
sudo apt-get autoremove mysql-server
sudo apt-get remove mysql-common  &lt;span class="c1"&gt;#很重要&lt;/span&gt;

&lt;span class="c1"&gt;# 清理残留数据&lt;/span&gt;
dpkg -l &lt;span class="p"&gt;|&lt;/span&gt; grep ^rc &lt;span class="p"&gt;|&lt;/span&gt; awk &lt;span class="s1"&gt;&amp;#39;{print $2}&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; sudo xargs dpkg -P
&lt;span class="c1"&gt;# 安装mysql&lt;/span&gt;
sudo apt-get install mysql-server mysql-client php5-mysql
&lt;span class="c1"&gt;# 启动mysql&lt;/span&gt;
&lt;span class="c1"&gt;# sudo /etc/init.d/mysql restart&lt;/span&gt;
&lt;span class="c1"&gt;# 安装phpmyadmin&lt;/span&gt;
sudo …&lt;/pre&gt;&lt;/div&gt;</summary><content type="html">&lt;h3&gt;Ubuntu彻底删除Mysql,重装Mysql&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# 删除MySQL&lt;/span&gt;
sudo apt-get autoremove --purge mysql-server-5.0
sudo apt-get remove mysql-server
sudo apt-get autoremove mysql-server
sudo apt-get remove mysql-common  &lt;span class="c1"&gt;#很重要&lt;/span&gt;

&lt;span class="c1"&gt;# 清理残留数据&lt;/span&gt;
dpkg -l &lt;span class="p"&gt;|&lt;/span&gt; grep ^rc &lt;span class="p"&gt;|&lt;/span&gt; awk &lt;span class="s1"&gt;&amp;#39;{print $2}&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; sudo xargs dpkg -P
&lt;span class="c1"&gt;# 安装mysql&lt;/span&gt;
sudo apt-get install mysql-server mysql-client php5-mysql
&lt;span class="c1"&gt;# 启动mysql&lt;/span&gt;
&lt;span class="c1"&gt;# sudo /etc/init.d/mysql restart&lt;/span&gt;
&lt;span class="c1"&gt;# 安装phpmyadmin&lt;/span&gt;
sudo apt-get install phpmyadmin
sudo ln -s /etc/phpmyadmin/apache.conf /etc/apache2.conf-available/phpmyadmin.conf
sudo a2enconf phpmyadmin
sudo /etc/init.d/apache2 reload
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;Ubuntu启动问题以及Grub Rescue修复方法&lt;/h3&gt;
&lt;p&gt;在安装双系统时，或者不小心删除了启动引导项时，启动时系统将进入Grub Rescue模式。在rescue模式下，只用少量的命令可以使用，但是通过一定的操作可以让系统加载正常模块，然后进入正常启动模式，启动后修复grub启动项即可。&lt;/p&gt;
&lt;p&gt;rescue模式下可使用的命令有：set,ls(列出文件),insmod(插入启动模块),root(设置启动分区),prefix(设置启动路径)。&lt;/p&gt;
&lt;p&gt;解决方法如下：&lt;/p&gt;
&lt;pre&gt;
# 查看系统分区情况
grub rescue&gt;ls
# 罗列出所有的磁盘分区信息，比如说：
(hd0,msdos6) (hd0,msdos5) (hd0,msdos4) (hd0,msdos3)(hd0,msdos2)
# 查找曾经安装系统的磁盘分区，找到相应的grub
grub rescue&gt;ls (hd0,X)/        # 查看X磁盘分区/根路径的文件信息
grub rescue&gt;ls (hd0,X)/boot    # 查看X磁盘分区/boot路径的文件信息
grub rescue&gt;ls (hd0,X)/grub    # 查看X磁盘分区/grub路径的文件信息
# 假设找的(hd0,msdos3)时，显示了文件信息，则表明系统安装在这个分区，并记住相应的grub路径
# 接下来，设置系统的启动项，调用如下命令
grub rescue&gt;set root=(hd0,msdos3)
grub rescue&gt;set prefix=(hd0,msdos3)/grub  #这个路径为之前找到的启动项路径
grub rescue&gt;insmod normal
# 设置完成后，进行启动即可
grub rescue&gt;normal&lt;/pre&gt;

&lt;p&gt;经过以上操作，就可以显示丢失的grub菜单，然后进入自己想进入的系统即可。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;注意&lt;/strong&gt;：如果进行重启，问题依旧存在。所以最关键的一步就是对grub进行修复。&lt;/b&gt;进入系统后，使用以下命令对grub进行修复。&lt;/p&gt;
&lt;pre&gt;
sudo update-grub
sudo grub-install /dev/sda
# sda是磁盘号码，不是分区号码&lt;/pre&gt;

&lt;p&gt;grub修复成功后，重启测试即可。&lt;em&gt;说明一下，grub修复成功后，其启动项是由当前系统去引导另一系统启动。&lt;/em&gt;你也可以进入另一系统进行grub修复，修改启动引导顺序，或者修改文件/etc/default/grub设定默认启动项(GRUB_DEFAULT从0开始计算)。&lt;/p&gt;</content><category term="tools"></category></entry></feed>